<h1 class="ui header">
  <%= parse_katex @article.title %>
</h1>

<div class="field">
  <%= author_label @article %>
</div>

<div class="ui message">
  <div class="header">Tags</div>
  <p>
    <% if @article.tags.empty? %>
      <i>None</i>
    <% else %>
      <% @article.tags.each do |article_tag| %>
        <%= render "tags/tag", tag: article_tag %>
      <% end %>
    <% end %>
  </p>
</div>

<% if current_user&.has_permission? @article %>
  <% if current_user != @article.owner && current_user.admin? %>
    <% msg = "Edit article as admin" %>
  <% else %>
    <% msg = "Edit article" %>
  <% end %>

  <%= link_to msg, edit_article_path(@article) %>
<% end %>

<div class="ui segment">
  <h1>tl;dr</h1>
  <%= parse_katex @article.tldr %>
  <% unless @article.tldr_image.attachment.nil? %>
    <%= image_tag(@article.tldr_image.attachment, style: "width: 100%; height: auto;") %>
  <% end %>
</div>

<%= parse_katex @article.body %>
